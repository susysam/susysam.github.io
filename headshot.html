<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roblox Headshot Finder</title>
<style>
body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(to right,#6a11cb,#2575fc); color:white; text-align:center; padding:50px;}
input { padding:10px; width:250px; border-radius:5px; border:none; margin-right:10px; font-size:16px;}
button { padding:10px 20px; font-size:16px; border-radius:5px; border:none; background-color:#ff9800; color:white; cursor:pointer; transition: transform 0.2s;}
button:hover { transform: scale(1.1);}
#loader { display:none; margin:20px auto; width:50px; height:50px; border-radius:50%; background:conic-gradient(red,orange,yellow,green,blue,indigo,violet,red); animation:spin 1s linear infinite;}
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
#result { margin-top:20px; font-size:16px; word-break:break-all;}
#headshot { margin-top:15px; max-width:300px; border:3px solid white; border-radius:10px;}
</style>
</head>
<body>

<h1>Roblox Headshot Finder</h1>
<p>Enter a Roblox UserId:</p>
<input type="text" id="userInput" placeholder="UserId only">
<button id="fetchBtn">Get Headshot</button>
<div id="loader"></div>
<div id="result"></div>

<script>
const BACKEND_URL = "https://susysam-github-io.onrender.com"; // Replace with your deployed backend URL

async function fetchHeadshot() {
    const input = document.getElementById('userInput').value.trim();
    if (!input || isNaN(input)) return alert("Please enter a valid numeric UserId");

    const loader = document.getElementById('loader');
    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = '';
    loader.style.display = 'block';

    try {
        const res = await fetch(`${BACKEND_URL}/headshot/${input}`);
        const data = await res.json();

        loader.style.display = 'none';

        if (!data.imageUrl) {
            return alert("Headshot not found");
        }

        resultDiv.innerHTML = `
            <p>Direct CDN Headshot URL:</p>
            <input type="text" id="headshotUrl" value="${data.imageUrl}" readonly style="width:90%;padding:5px;border-radius:5px;border:none;text-align:center;">
            <button id="copyBtn">Copy URL</button>
            <br><img id="headshot" src="${data.imageUrl}" alt="Headshot">
        `;

        document.getElementById('copyBtn').addEventListener('click', () => {
            const urlInput = document.getElementById('headshotUrl');
            urlInput.select();
            document.execCommand('copy');
            alert('CDN URL copied to clipboard!');
        });

    } catch (err) {
        loader.style.display = 'none';
        console.error(err);
        alert("Error fetching headshot. Make sure the UserId is valid and your backend is running.");
    }
}

document.getElementById('fetchBtn').addEventListener('click', fetchHeadshot);
</script>

</body>
</html>
